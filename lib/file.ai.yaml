---
version: 0.1.0
type: lib
description: "the simple text file loader used in prompt. eg, `user: summary the following file content: @file(document.md)`"
tag:
  - file
  - loader
  - prompt
  - lib
input:
  - content: {required: true} # The file path passed by the prompt
output:
  type: "string"
---
!fn |-
  async function loadFile() {
    const fs = await import('fs');
    const path = await import('path');
    const filename = path.basename(this.content);
    const filepath = expandPath(this.content)
    const content = fs.readFileSync(filepath, 'utf8');
    return `filename: ${filename}\nfile content:\n${content}`
  }
$loadFile
